"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){var n,o=this.length;for(t=t||window,n=0;n<o;n++)e.call(t,this[n],n,this)}),window.thebase={initOutlineToggle:function(){document.body.addEventListener("keydown",function(){document.body.classList.remove("hide-focus-outline")}),document.body.addEventListener("mousedown",function(){document.body.classList.add("hide-focus-outline")})},getOffset:function(e){return e instanceof HTMLElement?{top:(e=e.getBoundingClientRect()).top+window.pageYOffset,left:e.left+window.pageXOffset}:{top:null,left:null}},findParents:function(e,n){var o=[];return function e(t){t=t.parentNode;t instanceof HTMLElement&&(t.matches(n)&&o.push(t),e(t))}(e),o},toggleAttribute:function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!1),e.getAttribute(t)!==n?e.setAttribute(t,n):e.setAttribute(t,o)},initNavToggleSubmenus:function(){var e=document.querySelectorAll(".nav--toggle-sub");if(e.length)for(var t=0;t<e.length;t++)window.thebase.initEachNavToggleSubmenu(e[t])},initEachNavToggleSubmenu:function(e){var o=e.querySelectorAll(".menu ul");if(o.length)for(var t,a,n=0;n<o.length;n++)!function(n){(t=o[n].parentNode).querySelector(".dropdown-nav-toggle")&&((a=document.createElement("BUTTON")).setAttribute("aria-label",thebaseConfig.screenReader.expand),a.classList.add("dropdown-nav-special-toggle"),t.insertBefore(a,t.childNodes[1]),a.addEventListener("click",function(e){e.preventDefault(),window.thebase.toggleSubMenu(e.target.parentNode)}),t.addEventListener("mouseleave",function(e){window.thebase.toggleSubMenu(e.target,!1)}),t.querySelector("a").addEventListener("focus",function(e){for(var t=e.target.parentNode.parentNode.querySelectorAll("li.menu-item--toggled-on"),n=0;n<t.length;n++)window.thebase.toggleSubMenu(t[n],!1)}),o[n].addEventListener("keydown",function(e){var t="ul.toggle-show > li > a, ul.toggle-show > li > .dropdown-nav-special-toggle";9===e.keyCode&&(e.shiftKey?window.thebase.isfirstFocusableElement(o[n],document.activeElement,t)&&window.thebase.toggleSubMenu(o[n].parentNode,!1):window.thebase.islastFocusableElement(o[n],document.activeElement,t)&&window.thebase.toggleSubMenu(o[n].parentNode,!1))}),o[n].parentNode.classList.add("menu-item--has-toggle"))}(n)},toggleSubMenu:function(e,t){var n=e.querySelector(".dropdown-nav-special-toggle"),o=e.querySelector("ul"),a=e.classList.contains("menu-item--toggled-on");if(n.setAttribute("aria-expanded",(!(a=void 0!==t&&"boolean"==typeof t?!t:a)).toString()),a){e.classList.remove("menu-item--toggled-on"),o.classList.remove("toggle-show"),n.setAttribute("aria-label",thebaseConfig.screenReader.expand);for(var i=e.querySelectorAll(".menu-item--toggled-on"),r=0;r<i.length;r++)window.thebase.toggleSubMenu(i[r],!1)}else{for(var s=e.parentNode.querySelectorAll("li.menu-item--toggled-on"),d=0;d<s.length;d++)window.thebase.toggleSubMenu(s[d],!1);e.classList.add("menu-item--toggled-on"),o.classList.add("toggle-show"),n.setAttribute("aria-label",thebaseConfig.screenReader.collapse)}},isfirstFocusableElement:function(e,t,n){e=e.querySelectorAll(n);return 0<e.length&&t===e[0]},islastFocusableElement:function(e,t,n){e=e.querySelectorAll(n);return 0<e.length&&t===e[e.length-1]},toggleDrawer:function(e,n){n=void 0===n||n;var t,o,a=e,i=document.querySelector(a.dataset.toggleTarget),e=document,r=a.dataset.toggleDuration||250;window.thebase.toggleAttribute(a,"aria-expanded","true","false"),i.classList.contains("show-drawer")?(a.dataset.toggleBodyClass&&e.body.classList.remove(a.dataset.toggleBodyClass),i.classList.remove("active"),i.classList.remove("pop-animated"),setTimeout(function(){var e;i.classList.remove("show-drawer"),a.dataset.setFocus&&n&&((e=document.querySelector(a.dataset.setFocus))&&(e.focus(),e.hasAttribute("aria-expanded")&&window.thebase.toggleAttribute(e,"aria-expanded","true","false")))},r)):(i.classList.add("show-drawer"),a.dataset.toggleBodyClass&&e.body.classList.toggle(a.dataset.toggleBodyClass),setTimeout(function(){var e,t;i.classList.add("active"),a.dataset.setFocus,n&&(e=document.querySelector(a.dataset.setFocus))&&(e.hasAttribute("aria-expanded")&&window.thebase.toggleAttribute(e,"aria-expanded","true","false"),t=e.value,e.value="",e.focus(),e.value=t)},10),setTimeout(function(){i.classList.add("pop-animated")},r),i.classList.contains("popup-drawer")&&(e=i.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=e[0],o=e[e.length-1],document.addEventListener("keydown",function(e){"Tab"!==e.key&&9!==e.keyCode||(e.shiftKey?document.activeElement===t&&(o.focus(),e.preventDefault()):document.activeElement===o&&(t.focus(),e.preventDefault()))})))},initToggleDrawer:function(){var n=document.querySelectorAll(".drawer-toggle");if(n.length){for(var e=0;e<n.length;e++)!function(t){n[t].addEventListener("click",function(e){e.preventDefault(),window.thebase.toggleDrawer(n[t])})}(e);document.addEventListener("keyup",function(e){27===e.keyCode&&document.querySelectorAll(".popup-drawer.show-drawer.active")&&(e.preventDefault(),document.querySelectorAll(".popup-drawer.show-drawer.active").forEach(function(e){window.thebase.toggleDrawer(document.querySelector('*[data-toggle-target="'+e.dataset.drawerTargetString+'"]'))}))}),document.addEventListener("click",function(e){var e=e.target,t=document.querySelector(".show-drawer.active .drawer-overlay");e===t&&window.thebase.toggleDrawer(document.querySelector('*[data-toggle-target="'+t.dataset.drawerTargetString+'"]'))})}},initMobileToggleSub:function(){document.querySelectorAll(".has-collapse-sub-nav").forEach(function(e){e=e.querySelector(".current-menu-item");e&&window.thebase.findParents(e,"li").forEach(function(e){e=e.querySelector(".drawer-sub-toggle");e&&window.thebase.toggleDrawer(e,!0)})});var n=document.querySelectorAll(".drawer-sub-toggle");if(n.length)for(var e=0;e<n.length;e++)!function(t){n[t].addEventListener("click",function(e){e.preventDefault(),window.thebase.toggleDrawer(n[t])})}(e)},initMobileToggleAnchor:function(){var t=document.getElementById("mobile-drawer");if(t){var e=t.querySelectorAll("a");if(e.length)for(var n=0;n<e.length;n++)e[n].addEventListener("click",function(e){window.thebase.toggleDrawer(t.querySelector(".menu-toggle-close"),!1)})}},initTransHeaderPadding:function(){var t,n,e;document.body.classList.contains("no-header")||document.body.classList.contains("transparent-header")&&document.body.classList.contains("mobile-transparent-header")&&(t=document.querySelector(".entry-hero-container-inner"),n=document.querySelector("#masthead"),e=function(e){thebaseConfig.breakPoints.desktop<=window.innerWidth?document.body.classList.contains("transparent-header")?t.style.paddingTop=n.offsetHeight+"px":t.style.paddingTop=0:document.body.classList.contains("mobile-transparent-header")?t.style.paddingTop=n.offsetHeight+"px":t.style.paddingTop=0},t&&(window.addEventListener("resize",e,!1),window.addEventListener("scroll",e,!1),window.addEventListener("load",e,!1),e()))},getTopOffset:function(){var e=0;return thebaseConfig.breakPoints.desktop<=window.innerWidth?document.body.classList.contains("admin-bar")&&(e=32):e=0,Math.floor(0+e)},initStickySidebar:function(){var e,t;document.body.classList.contains("has-sticky-sidebar")&&(e=window.thebase.getTopOffset(),(t=document.querySelector("#secondary .sidebar-inner-wrap")).style.top=Math.floor(e+20)+"px",t.style.maxHeight="calc( 100vh - "+Math.floor(e+20)+"px )")},init:function(){window.thebase.initNavToggleSubmenus(),window.thebase.initToggleDrawer(),window.thebase.initMobileToggleAnchor(),window.thebase.initMobileToggleSub(),window.thebase.initOutlineToggle(),window.thebase.initStickySidebar(),window.thebase.initTransHeaderPadding()}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",window.thebase.init):window.thebase.init();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hdmlnYXRpb24tbGl0ZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJOb2RlTGlzdCIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsYmFjayIsInRoaXNBcmciLCJsZW5ndGgiLCJpIiwibGVuIiwiY2FsbCIsInRoaXMiLCJ0aGViYXNlIiwiaW5pdE91dGxpbmVUb2dnbGUiLCJkb2N1bWVudCIsImJvZHkiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiZ2V0T2Zmc2V0IiwiZWwiLCJIVE1MRWxlbWVudCIsInRvcCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwiZmluZFBhcmVudHMiLCJ0YXJnZXQiLCJxdWVyeSIsInBhcmVudHMiLCJwYXJlbnQiLCJpdGVtIiwicGFyZW50Tm9kZSIsIm1hdGNoZXMiLCJwdXNoIiwidHJhdmVyc2UiLCJ0b2dnbGVBdHRyaWJ1dGUiLCJlbGVtZW50IiwiYXR0cmlidXRlIiwidHJ1ZVZhbCIsImZhbHNlVmFsIiwidW5kZWZpbmVkIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiaW5pdE5hdlRvZ2dsZVN1Ym1lbnVzIiwibmF2VE9HR0xFIiwicXVlcnlTZWxlY3RvckFsbCIsImluaXRFYWNoTmF2VG9nZ2xlU3VibWVudSIsIlNVQk1FTlVTIiwibmF2IiwicGFyZW50TWVudUl0ZW0iLCJkcm9wZG93bkJ0biIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVFbGVtZW50IiwiZHJvcGRvd24iLCJ0aGViYXNlQ29uZmlnIiwic2NyZWVuUmVhZGVyIiwiZXhwYW5kIiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGROb2RlcyIsImUiLCJ0b2dnbGVTdWJNZW51IiwicGFyZW50TWVudUl0ZW1zVG9nZ2xlZCIsImoiLCJmb2N1c1NlbGVjdG9yIiwia2V5Q29kZSIsInNoaWZ0S2V5IiwiaXNmaXJzdEZvY3VzYWJsZUVsZW1lbnQiLCJhY3RpdmVFbGVtZW50IiwiaXNsYXN0Rm9jdXNhYmxlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsIl9sb29wIiwiZm9yY2VUb2dnbGUiLCJ0b2dnbGVCdXR0b24iLCJzdWJNZW51IiwicGFyZW50TWVudUl0ZW1Ub2dnbGVkIiwiY29udGFpbnMiLCJ0b1N0cmluZyIsInN1Yk1lbnVJdGVtc1RvZ2dsZWQiLCJjb2xsYXBzZSIsImNvbnRhaW5lciIsImZvY3VzYWJsZUVsZW1lbnRzIiwiY2hhbmdlRm9jdXMiLCJmaXJzdEZvY3VzYWJsZUVsZW1lbnQiLCJsYXN0Rm9jdXNhYmxlRWxlbWVudCIsInRvZ2dsZSIsImRhdGFzZXQiLCJ0b2dnbGVUYXJnZXQiLCJfZG9jIiwiZHVyYXRpb24iLCJ0b2dnbGVEdXJhdGlvbiIsInRvZ2dsZUJvZHlDbGFzcyIsInRvZ2dsZURyYXdlciIsInNldEZvY3VzIiwiZm9jdXMiLCJmb2N1c0VsZW1lbnQiLCJoYXNBdHRyaWJ1dGUiLCJzZXRUaW1lb3V0Iiwic2VhcmNoVGVybSIsInZhbHVlIiwiZm9jdXNhYmxlQ29udGVudCIsImtleSIsInByZXZlbnREZWZhdWx0IiwiaW5pdFRvZ2dsZURyYXdlciIsImRyYXdlclRPR0dMRSIsImV2ZW50IiwiX2xvb3AyIiwiZHJhd2VyVGFyZ2V0U3RyaW5nIiwibW9kYWwiLCJtb2RhbE1lbnUiLCJhY3RpdmVNZW51SXRlbSIsInN1Yk1lbnVUb2dnbGUiLCJkcmF3ZXJTdWJUT0dHTEUiLCJfbG9vcDMiLCJpbml0TW9iaWxlVG9nZ2xlQW5jaG9yIiwibW9iaWxlTW9kYWwiLCJnZXRFbGVtZW50QnlJZCIsIm1vZGFsTWVudXMiLCJtZW51TGluayIsImluaXRUcmFuc0hlYWRlclBhZGRpbmciLCJ1cGRhdGVIZXJvUGFkZGluZyIsImJyZWFrUG9pbnRzIiwiZGVza3RvcCIsImlubmVyV2lkdGgiLCJ0aXRsZUhlcm8iLCJzdHlsZSIsInBhZGRpbmdUb3AiLCJoZWFkZXIiLCJvZmZzZXRIZWlnaHQiLCJnZXRUb3BPZmZzZXQiLCJhY3RpdmVTY3JvbGxBZG1pbk9mZnNldFRvcCIsIk1hdGgiLCJmbG9vciIsImluaXRTdGlja3lTaWRlYmFyIiwib2Zmc2V0U3RpY2t5Iiwic2lkZWJhciIsIm1heEhlaWdodCIsImluaXQiXSwibWFwcGluZ3MiOiJhQVFBQSxPQUFBQyxXQUFBQSxTQUFBQyxVQUFBQyxVQUNBRixTQUFBQyxVQUFBQyxRQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFBS0wsRUFDSkMsRUFBU0MsS0FBQUEsT0FNUixJQUpBRyxFQUFPQSxHQUFRQyxPQUlUQyxFQUFJLEVBQUdBLEVBQUlDLEVBQUtELElBQXRCSCxFQUFPSyxLQUFPSixFQUFTSyxLQUFLSCxHQUFBQSxFQUFBRyxRQUs3QlYsT0FBQVcsUUFBVyxDQUtaQyxrQkFBQSxXQUNBQyxTQUFBQyxLQUFBQyxpQkFBQSxVQUFBLFdBQ0VILFNBQUFBLEtBQUFBLFVBQW1CSSxPQUFBLHdCQUdqQkgsU0FGREMsS0FBQUMsaUJBQUEsWUFBQSxXQUlBRixTQUFBQSxLQUFTQyxVQUFLQyxJQUFBQSx5QkFPakJFLFVBQUEsU0FBQUMsR0FDRUQsT0FBQUEsYUFBV0UsWUFJVCxDQUNDQyxLQUpGQyxFQUFPSCxFQUFBSSx5QkFJQUQsSUFBS0QsT0FBTXBCLFlBQ2hCdUIsS0FBQUEsRUFBTUYsS0FBS0UsT0FBT3ZCLGFBSXBCLENBQ0NvQixJQUFBQSxLQUNBRyxLQUFBQSxPQVdGQyxZQUFXLFNBQUVDLEVBQUFDLEdBQ1osSUFBQUMsRUFBVyxHQWVYLE9BWEMsU0FBSUMsRUFBU0MsR0FBVEQsRUFBU0MsRUFBS0MsV0FDbEJGLGFBQVdULGNBQ1ZTLEVBQUtBLFFBQU9HLElBQ1hKLEVBQUFBLEtBQVFLLEdBRVRDLEVBQVVMLElBSVpLLENBQVVSLEdBRVZFLEdBSUhPLGdCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLFFBQ2lCQyxJQUFmTCxJQUNDRyxHQUFLQSxRQUVKRSxJQUFBRCxJQUVBQSxHQUFXLEdBQVhBLEVBQVFFLGFBQVJKLEtBQUFDLEVBQ0FGLEVBQUFNLGFBQUFMLEVBQUFDLEdBQ0RGLEVBQUtBLGFBQVFLLEVBQWNKLElBTTVCTSxzQkFBQSxXQUNGLElBQUFDLEVBQUE5QixTQUFBK0IsaUJBQUEsb0JBR0VGLEdBQUFBLEVBQUFBLE9BS0UsSUFBQSxJQUFBbkMsRUFBQSxFQUFBQSxFQUFBb0MsRUFBQXJDLE9BQUFDLElBQ0FQLE9BQUFXLFFBQUFrQyx5QkFBQUYsRUFBQXBDLEtBR0FQLHlCQUFlNkMsU0FBQUEsR0FFaEIsSUExRmVDLEVBQUFDLEVBQUFILGlCQUFBLFlBNkZmLEdBQUlFLEVBQVF4QyxPQUtYLElBVmV1QyxJQWFYRyxFQUlDQyxFQVBMMUMsRUFBQSxFQUFBQSxFQUFBdUMsRUFBQXhDLE9BQUFDLEtBVmVzQyxTQVVmdEMsSUFHSXlDLEVBQWlCRixFQUFVdkMsR0FBSXVCLFlBVktvQixjQUFBLDJCQWNuQ0QsRUFBY3BDLFNBQVNzQyxjQUFlLFdBRHRDQyxhQUFXLGFBQUFDLGNBQUFDLGFBQUFDLFFBQ1hOLEVBQUFBLFVBQWNwQyxJQUFRLCtCQUcxQm1DLEVBQWVRLGFBQWNQLEVBQWFELEVBQWVTLFdBQVcsSUFEcEVSLEVBQUFBLGlCQUFBLFFBQTJCLFNBQUFTLEdBQzNCVixFQUFBQSxpQkFJQ2hELE9BQU9XLFFBQVFnRCxjQUFlRCxFQUFFakMsT0FBT0ssY0FDdkNrQixFQUVEakMsaUJBQUEsYUFBQSxTQUFBMkMsR0FFQzFELE9BQU9XLFFBQVFnRCxjQUFlRCxFQUFFakMsUUFBUSxLQUl6Q3VCLEVBQWVFLGNBQWUsS0FBTW5DLGlCQUFrQixRQUFTLFNBQVUyQyxHQUN4RSxJQUREVixJQUFBQSxFQUFlRSxFQUFBQSxPQUFxQm5DLFdBQUFBLFdBQWtCNkIsaUJBQXVCLDRCQUN4RWdCLEVBQUFBLEVBQUFBLEVBQUFBLEVBQWtDOUIsT0FBQUEsSUFFckM5QixPQUFPVyxRQUFRZ0QsY0FBZUMsRUFBd0JDLElBQUssS0FLN0RmLEVBQVV2QyxHQUFJUSxpQkFBa0IsVUFBVyxTQUFVMkMsR0FDcEQsSUFBQUksRUFBQSw4RUFJQSxJQUFLSixFQUFBSyxVQUNKTCxFQUFBTSxTQUVDaEUsT0FBS0EsUUFBT1csd0JBQVFzRCxFQUF5Qm5CLEdBQVV2QyxTQUFLTSxjQUFTcUQsSUFDcEVsRSxPQUFBQSxRQUFNMkQsY0FBU0EsRUFBZWIsR0FBQUEsWUFBY2hCLEdBSDlDOUIsT0FNWUEsUUFBT1csdUJBQVF3RCxFQUF3QnJCLEdBQVFqQyxTQUFPQSxjQUFTcUQsSUFDMUVsRSxPQUFBQSxRQUFPVyxjQUFRZ0QsRUFBZWIsR0FBQUEsWUFBY2hCLE1BTS9DZ0IsRUFBQXZDLEdBQUF1QixXQUFBc0MsVUFBQUMsSUFBQSwwQkFsRERDLENBQUEvRCxJQTJERG9ELGNBQWUsU0FBVVgsRUFBZ0J1QixHQU4xQyxJQUFBQyxFQUFBeEIsRUFBQUUsY0FBQSxnQ0FDRnVCLEVBQUF6QixFQUFBRSxjQUFBLE1BQ0F3QixFQUFBMUIsRUFBQW9CLFVBQUFPLFNBQUEseUJBY0dILEdBUEFBLEVBQUlFLGFBQUFBLG1CQUpQQSxPQURBbkMsSUFBQWdDLEdBQUEsa0JBQUFBLEdBQ0FBLEVBSThDSCxJQUFvQlEsWUFPL0RKLEVBQTJCLENBRzlCeEIsRUFBQW9CLFVBQUFwRCxPQUFBLHlCQUNBeUQsRUFBQUwsVUFBQXBELE9BQUEsZUFDQXdELEVBQUEvQixhQUFBLGFBQUFZLGNBQUFDLGFBQUFDLFFBR0ksSUFERCxJQUFBc0IsRUFBS0gsRUFBd0I5QixpQkFBQSwwQkFDNUJyQyxFQUFBLEVBQUFBLEVBQUFzRSxFQUFBdkUsT0FBQUMsSUFDQXlDLE9BQUFBLFFBQUFBLGNBQXlCaEMsRUFBUVQsSUFBQSxPQUVqQ2lFLENBVUEsSUFQQSxJQUFBWixFQUF1QlosRUFBaUJsQixXQUFDYyxpQkFBa0IsNEJBT2pEckMsRUFBSSxFQUFHQSxFQUFJcUQsRUFBdUJ0RCxPQUFRQyxJQU5wRFAsT0FBQVcsUUFBV2dELGNBQVVrQixFQUFyQnRFLElBQXVELEdBSXZEeUMsRUFBQW9CLFVBQUFDLElBQUEseUJBQ0FJLEVBQUliLFVBQUFBLElBQUFBLGVBUUpZLEVBQWEvQixhQUFjLGFBQWNZLGNBQWNDLGFBQWF3QixZQVd0RWIsd0JBQXlCLFNBQVVjLEVBQVc1QyxFQUFTMkIsR0FSdkRrQixFQUFBRCxFQUFBbkMsaUJBQUFrQixHQUNGLE9BQUEsRUFBQWtCLEVBQUExRSxRQUNBNkIsSUFBQTZDLEVBQUEsSUFXR2IsdUJBQUEsU0FBQVksRUFBQTVDLEVBQUEyQixHQW5OZWtCLEVBQUFELEVBQUFuQyxpQkFBQWtCLEdBc05oQixPQUFBLEVBQUFrQixFQUFBMUUsUUFDRjZCLElBQUE2QyxFQUFBQSxFQUFBMUUsT0FBQSxJQU9FNkQsYUFBQUEsU0FBc0JoQyxFQUFFOEMsR0FDdkJBLE9BQWtDckMsSUFBOUJvQyxHQUFnRGxCLEVBWXBELElBdURNb0IsRUFuQkhDLEVBcENDQyxFQUFTakQsRUFWYlYsRUFBU3VELFNBQUFBLGNBQTJCSSxFQUFBQyxRQUFBQyxjQUNuQ0MsRUFBT3BELFNBQ1BxRCxFQUFBSixFQUFBQyxRQUFBSSxnQkFBQSxJQVlEekYsT0FBT1csUUFBUXVCLGdCQUFpQmtELEVBQVEsZ0JBQWlCLE9BQVEsU0FYakUzRCxFQUFPMkMsVUFBUE8sU0FBQSxnQkFwT2VTLEVBQUFDLFFBQUFLLGlCQWtQYkgsRUFBS3pFLEtBQUtzRCxVQUFVcEQsT0FBUW9FLEVBQU9DLFFBQVFLLGlCQVZoRGpFLEVBQUEyQyxVQUFBcEQsT0FBQSxVQUNHMkUsRUFBQUEsVUFBYzNFLE9BQUEsZ0JBQ2RpRSxXQUFBQSxXQUVBLElBQ0lNLEVBRko5RCxFQUFJMkQsVUFBU2pELE9BQWIsZUFDSVYsRUFBTTRELFFBQUd4RSxVQUFTcUMsS0FDbEJxQyxFQUFKMUUsU0FBQXFDLGNBQUFrQyxFQUFBQyxRQUFBTyxhQUVBNUYsRUFBQTZGLFFBY1NDLEVBQWFDLGFBQWMsa0JBYnBDL0YsT0FBS3lCLFFBQU8yQyxnQkFBbUIwQixFQUFpQixnQkFBQSxPQUFBLFlBa0I1Q04sS0FaSC9ELEVBQUFBLFVBQU8yQyxJQUFVcEQsZUFFaEJTLEVBQU00RCxRQUFDakIsaUJBZ0JQbUIsRUFBS3pFLEtBQUtzRCxVQUFVZ0IsT0FBUUEsRUFBT0MsUUFBUUssaUJBZDFDTSxXQUFBLFdBQ0EsSUFDQ0YsRUFLREcsRUFVRHhFLEVBQU8yQyxVQUFVQyxJQUFJLFVBaEJwQmUsRUFBS1UsUUFBQUEsU0FBZWIsSUFDbkJhLEVBQUFBLFNBQUE1QyxjQUFBa0MsRUFBQUMsUUFBQU8sYUFFQzVGLEVBQU9XLGFBQVF1QixrQkFDZmxDLE9BQUFXLFFBQUF1QixnQkFBQTRELEVBQUEsZ0JBQUEsT0FBQSxTQUVGRyxFQUFBSCxFQUFBSSxNQUNESixFQVhESSxNQUFBLEdBUERKLEVBbUJPRCxRQUNOQyxFQUFBSSxNQUFBRCxJQUdBLElBQ0NWLFdBQUt6RSxXQUNMVyxFQUFBMkMsVUFBQUMsSUFBQSxpQkFtQkVtQixHQWpCRi9ELEVBQU0yQyxVQUFOTyxTQUFxQixrQkFFcEJ3QixFQUFnQjFFLEVBQUdaLGlCQURBK0UsNEVBc0JoQlYsRUFBd0JpQixFQUFpQixHQW5CNUNoQixFQUFvQmdCLEVBQUFBLEVBQUE3RixPQUFBLEdBRWxCTixTQUFBQSxpQkFBZWtDLFVBQUFBLFNBQWlCNEQsR0FDaEMsUUFBQXBDLEVBQUEwQyxLQUFBLElBQUExQyxFQUFBSyxVQUtETCxFQUFBTSxTQUNEbkQsU0FBQXFELGdCQUFBZ0IsSUFDREMsRUFmRFUsUUFnQkFHLEVBQUFBLGtCQXdCUW5GLFNBQVNxRCxnQkFBa0JpQixJQXBCbkNELEVBQXNCUCxRQUNyQmpCLEVBQUEyQyx3QkFVRUMsaUJBQUEsV0FDQSxJQUFBQyxFQUFBMUYsU0FBQStCLGlCQUFBLGtCQUVtQixHQUFBMkQsRUFBQWpHLE9BQUEsQ0EwQnZCLElBN0JJLElBNkJNQyxFQUFJLEVBQUdBLEVBQUlnRyxFQUFhakcsT0FBUUMsS0E3QnRDLFNBNkJNQSxHQXZCTG1ELEVBQUUyQyxHQUFBQSxpQkFBRixRQUFBLFNBQUFHLEdBQ0FBLEVBQUFILGlCQUNEckcsT0FBQVcsUUFBTWdGLGFBQUFZLEVBQUFoRyxNQXFCc0NrRyxDQUF0Q2xHLEdBbkJMMkUsU0FBQUEsaUJBQUFBLFFBQXNCVyxTQUFTVyxHQUM3QkgsS0FBRjNDLEVBQUFBLFNBQ0E3QyxTQUFBK0IsaUJBQUEsc0NBQ0Q0RCxFQUFBSCxpQkFDRHhGLFNBbEJEK0IsaUJBQUEsb0NBQUF6QyxRQUFBLFNBQUFnQyxHQW1CQW5DLE9BQUFXLFFBQUFnRixhQUFBOUUsU0FBQXFDLGNBQUEseUJBQUFmLEVBQUFrRCxRQUFBcUIsbUJBQUEsWUFLTDdGLFNBQUFFLGlCQUFBLFFBQUEsU0FBQXlGLEdBQ0EsSUFBQS9FLEVBQUErRSxFQUFBL0UsT0FDRzZFLEVBQUFBLFNBQWtCcEQsY0FBQSx1Q0FDbEJ6QixJQUFJOEUsR0E2QkZ2RyxPQUFPVyxRQUFRZ0YsYUFBYTlFLFNBQVNxQyxjQUFjLHlCQUEyQnlELEVBQU10QixRQUFRcUIsbUJBQXFCLFdBcEJqSDFHLG9CQUFBLFdBRkRhLFNBQUErQixpQkFBQSx5QkFpQ1V6QyxRQUFTLFNBQVV5RyxHQWxDOUJDLEVBQWtCRCxFQUFHTCxjQUFyQixzQkFBZ0RNLEdBSy9DN0csT0FDRFcsUUFBQWEsWUFBQXFGLEVBQUEsTUFBQTFHLFFBQUEsU0FBQWdDLEdBZ0NPMkUsRUFBZ0IzRSxFQUFRZSxjQUFlLHNCQUN0QzRELEdBaENSakcsT0FBUUYsUUFBQ0ksYUFBa0IrRixHQUFtQk4sT0FINUMsSUFRQzNGLEVBQVMrQixTQUFBQSxpQkFBa0Isc0JBRTFCLEdBQUFtRSxFQUZEekcsT0F1Q0gsSUFoRGlCcUYsSUFnRFBwRixFQUFJLEVBQUdBLEVBQUl3RyxFQUFnQnpHLE9BQVFDLEtBaEQ1Qm9GLFNBZ0RQcEYsR0FoQ1ZNLEVBQVNFLEdBQUFBLGlCQUEyQixRQUFVeUYsU0FBT0EsR0FDcERBLEVBQUFILGlCQUNBckcsT0FBSTJHLFFBQVE5RixhQUFTcUMsRUFBZTNDLE1BOEJjeUcsQ0FBekN6RyxJQXhCWDBHLHVCQUFBLFdBQ0YsSUFBQUMsRUFBQXJHLFNBQUFzRyxlQUFBLGlCQUVBLEdBQUFELEVBQUEsQ0FJR0UsSUFBQUEsRUFBV2pILEVBQVN5QyxpQkFBc0IsS0FvQzFDLEdBQU95RSxFQUFTL0csT0FoQ2IsSUFBQSxJQUFBQyxFQUFJdUcsRUFBQUEsRUFBQUEsRUFBZ0IzRSxPQUFRZSxJQW9DOUJtRSxFQUFVOUcsR0FBSVEsaUJBQWlCLFFBQVMsU0FBVXlGLEdBbkNoRHhHLE9BQUFXLFFBQUttRyxhQUFnQkksRUFBQWhFLGNBQUEsdUJBQUEsT0EyQ3pCb0UsdUJBQXdCLFdBbkN2QixJQU1FZCxFQUNBeEcsRUFDQXVILEVBUkYxRyxTQUFPa0csS0FBQUEsVUFBZ0J6RyxTQUFTLGNBdUN6Qk8sU0FBU0MsS0FBS3NELFVBQVVPLFNBQVUsdUJBQTRCOUQsU0FBU0MsS0FBS3NELFVBQVVPLFNBQVUsK0JBakNyRzZCLEVBQU1ILFNBQUFBLGNBQU4sK0JBQ0FyRyxFQUFBQSxTQUFPVyxjQUFzQm9HLGFBQzdCUSxFQUhELFNBQUE3RCxHQXlDS0wsY0FBY21FLFlBQVlDLFNBQVd6SCxPQUFPMEgsV0ExQzVDN0csU0FBTkMsS0FBcUJpRyxVQUFBQSxTQUFnQnpHLHNCQXpYdEJxSCxFQUFBQyxNQUFBQyxXQUFBQyxFQUFBQyxhQUFBLEtBeVhvQ0osRUFBQUMsTUFBQUMsV0FBQSxFQVF0RGhILFNBQUFDLEtBQUFzRCxVQUFBTyxTQUFBLDZCQUdHc0MsRUFBQUEsTUFBQUEsV0FBd0JhLEVBQUFDLGFBQUEsS0FGM0JKLEVBQUFDLE1BQUFDLFdBQUEsR0FNSUYsSUFDQTNILE9BQUFlLGlCQUFBLFNBQUF3RyxHQUFBLEdBMENBdkgsT0FBT2UsaUJBQWtCLFNBQVV3RyxHQUFtQixHQXpDdkR2SCxPQUFJcUgsaUJBQVdILE9BQVl0RSxHQUMzQixHQTBDQzJFLE9BdkNBUyxhQUFBLFdBMkNBLElBMUNEQyxFQUFxQlosRUFPeEIsT0FOSUEsY0FBY3RHLFlBQUFBLFNBQWRmLE9BQXdDMEgsV0FDdkMxSCxTQUFPVyxLQUFBQSxVQUFRZ0YsU0FBY3VCLGVBQzdCZSxFQUZELElBZ0RBQSxFQUE2QixFQTFDakNDLEtBQUFDLE1BbUNnQyxFQW5DaENGLElBS0lHLGtCQUFBLFdBNkNELElBMUNDQyxFQThDREMsRUFKT3pILFNBQVNDLEtBQUtzRCxVQUFVTyxTQUFVLHdCQTFDeEMwRCxFQUFBckksT0FBQVcsUUFBQXFILGdCQThDRE0sRUFBV3pILFNBQVNxQyxjQUFlLG1DQTdDL0J5RSxNQUFBQSxJQUFZOUcsS0FBQUEsTUFBU3FDLEVBQWUsSUFBQSxLQUF4Q29GLEVBQ0NSLE1BQU1TLFVBQWFyRixpQkFBZWdGLEtBQXhCQyxNQURYRSxFQUFBLElBQUEsU0FHQ1AsS0FBQUEsV0FnREQ5SCxPQUFPVyxRQUFRK0Isd0JBL0NkMUMsT0FBQVcsUUFBSzBDLG1CQUNKckQsT0FBQVcsUUFBT0UseUJBQ044RyxPQUFBQSxRQUFBQSxzQkFDQTNILE9BQUFXLFFBQU1DLG9CQUNOK0csT0FBQUEsUUFBQUEsb0JBQ0EzSCxPQUFBVyxRQUFBMkcsMkJBR0FLLFlBQUFBLFNBQWdCRSxXQUVoQkYsU0FBQUEsaUJBQWdCRSxtQkFBb0JFLE9BQUFBLFFBQWVTLE1BR3JEeEksT0FmRFcsUUFBQTZIIiwiZmlsZSI6Im5hdmlnYXRpb24tbGl0ZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgdGhlYmFzZUNvbmZpZyAqL1xyXG4vKipcclxuICogRmlsZSBuYXZpZ2F0aW9uLmpzLlxyXG4gKlxyXG4gKiBIYW5kbGVzIHRvZ2dsaW5nIHRoZSBuYXZpZ2F0aW9uIG1lbnUgZm9yIHNtYWxsIHNjcmVlbnMgYW5kIGVuYWJsZXMgVEFCIGtleVxyXG4gKiBuYXZpZ2F0aW9uIHN1cHBvcnQgZm9yIGRyb3Bkb3duIG1lbnVzLlxyXG4gKi9cclxuXHJcbi8vIHBvbHlmaWxsIGZvckVhY2hcclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05vZGVMaXN0L2ZvckVhY2gjUG9seWZpbGxcclxuaWYgKCB3aW5kb3cuTm9kZUxpc3QgJiYgISBOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCApIHtcclxuXHROb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKCBjYWxsYmFjaywgdGhpc0FyZyApIHtcclxuXHRcdHZhciBpO1xyXG5cdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG5cclxuXHRcdHRoaXNBcmcgPSB0aGlzQXJnIHx8IHdpbmRvdztcclxuXHJcblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xyXG5cdFx0XHRjYWxsYmFjay5jYWxsKCB0aGlzQXJnLCB0aGlzWyBpIF0sIGksIHRoaXMgKTtcclxuXHRcdH1cclxuXHR9O1xyXG59XHJcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0d2luZG93LnRoZWJhc2UgPSB7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBGdW5jdGlvbiB0byBpbml0IGRpZmZlcmVudCBzdHlsZSBvZiBmb2N1c2VkIGVsZW1lbnQgb24ga2V5Ym9hcmQgdXNlcnMgYW5kIG1vdXNlIHVzZXJzLlxyXG5cdFx0ICovXHJcblx0XHRpbml0T3V0bGluZVRvZ2dsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoICdoaWRlLWZvY3VzLW91dGxpbmUnICk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCAnbW91c2Vkb3duJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCAnaGlkZS1mb2N1cy1vdXRsaW5lJyApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBHZXQgZWxlbWVudCdzIG9mZnNldC5cclxuXHRcdCAqL1xyXG5cdFx0Z2V0T2Zmc2V0OiBmdW5jdGlvbiggZWwgKSB7XHJcblx0XHRcdGlmICggZWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCApIHtcclxuXHRcdFx0XHR2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0dG9wOiByZWN0LnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCxcclxuXHRcdFx0XHRcdGxlZnQ6IHJlY3QubGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHR0b3A6IG51bGwsXHJcblx0XHRcdFx0bGVmdDogbnVsbFxyXG5cdFx0XHR9O1xyXG5cdFx0fSxcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIHRyYXZlcnNlcyB0aGUgRE9NIHVwIHRvIGZpbmQgZWxlbWVudHMgbWF0Y2hpbmcgdGhlIHF1ZXJ5XHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0XHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlcclxuXHRcdCAqIEByZXR1cm4ge05vZGVMaXN0fSBwYXJlbnRzIG1hdGNoaW5nIHF1ZXJ5XHJcblx0XHQgKi9cclxuXHRcdGZpbmRQYXJlbnRzOiBmdW5jdGlvbiggdGFyZ2V0LCBxdWVyeSApIHtcclxuXHRcdFx0dmFyIHBhcmVudHMgPSBbXTtcclxuXHJcblx0XHRcdC8vIHJlY3Vyc2l2ZWx5IGdvIHVwIHRoZSBET00gYWRkaW5nIG1hdGNoZXMgdG8gdGhlIHBhcmVudHMgYXJyYXlcclxuXHRcdFx0ZnVuY3Rpb24gdHJhdmVyc2UoIGl0ZW0gKSB7XHJcblx0XHRcdFx0dmFyIHBhcmVudCA9IGl0ZW0ucGFyZW50Tm9kZTtcclxuXHRcdFx0XHRpZiAoIHBhcmVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICkge1xyXG5cdFx0XHRcdFx0aWYgKCBwYXJlbnQubWF0Y2hlcyggcXVlcnkgKSApIHtcclxuXHRcdFx0XHRcdFx0cGFyZW50cy5wdXNoKCBwYXJlbnQgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRyYXZlcnNlKCBwYXJlbnQgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRyYXZlcnNlKCB0YXJnZXQgKTtcclxuXHJcblx0XHRcdHJldHVybiBwYXJlbnRzO1xyXG5cdFx0fSxcclxuXHRcdC8qKlxyXG5cdFx0ICogVG9nZ2xlIGFuIGF0dHJpYnV0ZS5cclxuXHRcdCAqL1xyXG5cdFx0dG9nZ2xlQXR0cmlidXRlOiBmdW5jdGlvbiggZWxlbWVudCwgYXR0cmlidXRlLCB0cnVlVmFsLCBmYWxzZVZhbCApIHtcclxuXHRcdFx0aWYgKCB0cnVlVmFsID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dHJ1ZVZhbCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBmYWxzZVZhbCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdGZhbHNlVmFsID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBlbGVtZW50LmdldEF0dHJpYnV0ZSggYXR0cmlidXRlICkgIT09IHRydWVWYWwgKSB7XHJcblx0XHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoIGF0dHJpYnV0ZSwgdHJ1ZVZhbCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCBhdHRyaWJ1dGUsIGZhbHNlVmFsICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQvKipcclxuXHRcdCAqIEluaXRpYXRlIHRoZSBzY3JpcHQgdG8gcHJvY2VzcyBhbGxcclxuXHRcdCAqIG5hdmlnYXRpb24gbWVudXMgd2l0aCBzdWJtZW51IHRvZ2dsZSBlbmFibGVkLlxyXG5cdFx0ICovXHJcblx0XHRpbml0TmF2VG9nZ2xlU3VibWVudXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgbmF2VE9HR0xFID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJy5uYXYtLXRvZ2dsZS1zdWInICk7XHJcblxyXG5cdFx0XHQvLyBObyBwb2ludCBpZiBubyBuYXZzLlxyXG5cdFx0XHRpZiAoICEgbmF2VE9HR0xFLmxlbmd0aCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZvciAoIGxldCBpID0gMDsgaSA8IG5hdlRPR0dMRS5sZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0XHR3aW5kb3cudGhlYmFzZS5pbml0RWFjaE5hdlRvZ2dsZVN1Ym1lbnUoIG5hdlRPR0dMRVsgaSBdICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRpbml0RWFjaE5hdlRvZ2dsZVN1Ym1lbnU6IGZ1bmN0aW9uKCBuYXYgKSB7XHJcblx0XHRcdC8vIEdldCB0aGUgc3VibWVudXMuXHJcblx0XHRcdHZhciBTVUJNRU5VUyA9IG5hdi5xdWVyeVNlbGVjdG9yQWxsKCAnLm1lbnUgdWwnICk7XHJcblx0XHRcclxuXHRcdFx0Ly8gTm8gcG9pbnQgaWYgbm8gc3VibWVudXMuXHJcblx0XHRcdGlmICggISBTVUJNRU5VUy5sZW5ndGggKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcclxuXHRcdFx0Zm9yICggbGV0IGkgPSAwOyBpIDwgU1VCTUVOVVMubGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdFx0dmFyIHBhcmVudE1lbnVJdGVtID0gU1VCTUVOVVNbIGkgXS5wYXJlbnROb2RlO1xyXG5cdFx0XHRcdGxldCBkcm9wZG93biA9IHBhcmVudE1lbnVJdGVtLnF1ZXJ5U2VsZWN0b3IoICcuZHJvcGRvd24tbmF2LXRvZ2dsZScgKTtcclxuXHRcdFx0XHQvLyBJZiBkcm9wZG93bi5cclxuXHRcdFx0XHRpZiAoIGRyb3Bkb3duICkge1xyXG5cdFx0XHRcdFx0dmFyIGRyb3Bkb3duQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ0JVVFRPTicgKTsgLy8gQ3JlYXRlIGEgPGJ1dHRvbj4gZWxlbWVudFxyXG5cdFx0XHRcdFx0ZHJvcGRvd25CdG4uc2V0QXR0cmlidXRlKCAnYXJpYS1sYWJlbCcsIHRoZWJhc2VDb25maWcuc2NyZWVuUmVhZGVyLmV4cGFuZCApO1xyXG5cdFx0XHRcdFx0ZHJvcGRvd25CdG4uY2xhc3NMaXN0LmFkZCggJ2Ryb3Bkb3duLW5hdi1zcGVjaWFsLXRvZ2dsZScgKTtcclxuXHRcdFx0XHRcdHBhcmVudE1lbnVJdGVtLmluc2VydEJlZm9yZSggZHJvcGRvd25CdG4sIHBhcmVudE1lbnVJdGVtLmNoaWxkTm9kZXNbMV0gKTtcclxuXHRcdFx0XHRcdC8vIFRvZ2dsZSB0aGUgc3VibWVudSB3aGVuIHdlIGNsaWNrIHRoZSBkcm9wZG93biBidXR0b24uXHJcblx0XHRcdFx0XHRkcm9wZG93bkJ0bi5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHR3aW5kb3cudGhlYmFzZS50b2dnbGVTdWJNZW51KCBlLnRhcmdldC5wYXJlbnROb2RlICk7XHJcblx0XHRcdFx0XHR9ICk7XHJcblx0XHRcclxuXHRcdFx0XHRcdC8vIENsZWFuIHVwIHRoZSB0b2dnbGUgaWYgYSBtb3VzZSB0YWtlcyBvdmVyIGZyb20ga2V5Ym9hcmQuXHJcblx0XHRcdFx0XHRwYXJlbnRNZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKCAnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdFx0XHR3aW5kb3cudGhlYmFzZS50b2dnbGVTdWJNZW51KCBlLnRhcmdldCwgZmFsc2UgKTtcclxuXHRcdFx0XHRcdH0gKTtcclxuXHRcdFxyXG5cdFx0XHRcdFx0Ly8gV2hlbiB3ZSBmb2N1cyBvbiBhIG1lbnUgbGluaywgbWFrZSBzdXJlIGFsbCBzaWJsaW5ncyBhcmUgY2xvc2VkLlxyXG5cdFx0XHRcdFx0cGFyZW50TWVudUl0ZW0ucXVlcnlTZWxlY3RvciggJ2EnICkuYWRkRXZlbnRMaXN0ZW5lciggJ2ZvY3VzJywgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0XHRcdHZhciBwYXJlbnRNZW51SXRlbXNUb2dnbGVkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoICdsaS5tZW51LWl0ZW0tLXRvZ2dsZWQtb24nICk7XHJcblx0XHRcdFx0XHRcdGZvciAoIGxldCBqID0gMDsgaiA8IHBhcmVudE1lbnVJdGVtc1RvZ2dsZWQubGVuZ3RoOyBqKysgKSB7XHJcblx0XHRcdFx0XHRcdFx0d2luZG93LnRoZWJhc2UudG9nZ2xlU3ViTWVudSggcGFyZW50TWVudUl0ZW1zVG9nZ2xlZFsgaiBdLCBmYWxzZSApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9ICk7XHJcblx0XHRcclxuXHRcdFx0XHRcdC8vIEhhbmRsZSBrZXlib2FyZCBhY2Nlc3NpYmlsaXR5IGZvciB0cmF2ZXJzaW5nIG1lbnUuXHJcblx0XHRcdFx0XHRTVUJNRU5VU1sgaSBdLmFkZEV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0XHRcdC8vIFRoZXNlIHNwZWNpZmljIHNlbGVjdG9ycyBoZWxwIHVzIG9ubHkgc2VsZWN0IGl0ZW1zIHRoYXQgYXJlIHZpc2libGUuXHJcblx0XHRcdFx0XHRcdHZhciBmb2N1c1NlbGVjdG9yID0gJ3VsLnRvZ2dsZS1zaG93ID4gbGkgPiBhLCB1bC50b2dnbGUtc2hvdyA+IGxpID4gLmRyb3Bkb3duLW5hdi1zcGVjaWFsLXRvZ2dsZSc7XHJcblx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gOSBpcyB0YWIgS2V5TWFwXHJcblx0XHRcdFx0XHRcdGlmICggOSA9PT0gZS5rZXlDb2RlICkge1xyXG5cdFx0XHRcdFx0XHRcdGlmICggZS5zaGlmdEtleSApIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIE1lYW5zIHdlJ3JlIHRhYmJpbmcgb3V0IG9mIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN1Ym1lbnUuXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHdpbmRvdy50aGViYXNlLmlzZmlyc3RGb2N1c2FibGVFbGVtZW50IChTVUJNRU5VU1sgaSBdLCBkb2N1bWVudC5hY3RpdmVFbGVtZW50LCBmb2N1c1NlbGVjdG9yICkgKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHdpbmRvdy50aGViYXNlLnRvZ2dsZVN1Yk1lbnUoIFNVQk1FTlVTWyBpIF0ucGFyZW50Tm9kZSwgZmFsc2UgKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdC8vIE1lYW5zIHdlJ3JlIHRhYmJpbmcgb3V0IG9mIHRoZSBlbmQgb2YgdGhlIHN1Ym1lbnUuXHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggd2luZG93LnRoZWJhc2UuaXNsYXN0Rm9jdXNhYmxlRWxlbWVudCggU1VCTUVOVVNbIGkgXSwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgZm9jdXNTZWxlY3RvciApICkge1xyXG5cdFx0XHRcdFx0XHRcdFx0d2luZG93LnRoZWJhc2UudG9nZ2xlU3ViTWVudSggU1VCTUVOVVNbIGkgXS5wYXJlbnROb2RlLCBmYWxzZSApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSApO1xyXG5cdFx0XHJcblx0XHRcdFx0XHRTVUJNRU5VU1sgaSBdLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCggJ21lbnUtaXRlbS0taGFzLXRvZ2dsZScgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQvKipcclxuXHRcdCAqIFRvZ2dsZSBzdWJtZW51cyBvcGVuIGFuZCBjbG9zZWQsIGFuZCB0ZWxsIHNjcmVlbiByZWFkZXJzIHdoYXQncyBnb2luZyBvbi5cclxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRNZW51SXRlbSBQYXJlbnQgbWVudSBlbGVtZW50LlxyXG5cdFx0ICogQHBhcmFtIHtib29sZWFufSBmb3JjZVRvZ2dsZSBGb3JjZSB0aGUgbWVudSB0b2dnbGUuXHJcblx0XHQgKiBAcmV0dXJuIHt2b2lkfVxyXG5cdFx0ICovXHJcblx0XHQgdG9nZ2xlU3ViTWVudTogZnVuY3Rpb24oIHBhcmVudE1lbnVJdGVtLCBmb3JjZVRvZ2dsZSApIHtcclxuXHRcdFx0dmFyIHRvZ2dsZUJ1dHRvbiA9IHBhcmVudE1lbnVJdGVtLnF1ZXJ5U2VsZWN0b3IoICcuZHJvcGRvd24tbmF2LXNwZWNpYWwtdG9nZ2xlJyApLFxyXG5cdFx0XHRcdHN1Yk1lbnUgPSBwYXJlbnRNZW51SXRlbS5xdWVyeVNlbGVjdG9yKCAndWwnICk7XHJcblx0XHRcdGxldCBwYXJlbnRNZW51SXRlbVRvZ2dsZWQgPSBwYXJlbnRNZW51SXRlbS5jbGFzc0xpc3QuY29udGFpbnMoICdtZW51LWl0ZW0tLXRvZ2dsZWQtb24nICk7XHJcblx0XHRcdC8vIFdpbGwgYmUgdHJ1ZSBpZiB3ZSB3YW50IHRvIGZvcmNlIHRoZSB0b2dnbGUgb24sIGZhbHNlIGlmIGZvcmNlIHRvZ2dsZSBjbG9zZS5cclxuXHRcdFx0aWYgKCB1bmRlZmluZWQgIT09IGZvcmNlVG9nZ2xlICYmICdib29sZWFuJyA9PT0gKCB0eXBlb2YgZm9yY2VUb2dnbGUgKSApIHtcclxuXHRcdFx0XHRwYXJlbnRNZW51SXRlbVRvZ2dsZWQgPSAhIGZvcmNlVG9nZ2xlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUb2dnbGUgYXJpYS1leHBhbmRlZCBzdGF0dXMuXHJcblx0XHRcdHRvZ2dsZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgKCAhIHBhcmVudE1lbnVJdGVtVG9nZ2xlZCApLnRvU3RyaW5nKCkgKTtcclxuXHJcblx0XHRcdC8qXHJcblx0XHRcdCogU3RlcHMgdG8gaGFuZGxlIGR1cmluZyB0b2dnbGU6XHJcblx0XHRcdCogLSBMZXQgdGhlIHBhcmVudCBtZW51IGl0ZW0ga25vdyB3ZSdyZSB0b2dnbGVkIG9uL29mZi5cclxuXHRcdFx0KiAtIFRvZ2dsZSB0aGUgQVJJQSBsYWJlbCB0byBsZXQgc2NyZWVuIHJlYWRlcnMga25vdyB3aWxsIGV4cGFuZCBvciBjb2xsYXBzZS5cclxuXHRcdFx0Ki9cclxuXHRcdFx0aWYgKCBwYXJlbnRNZW51SXRlbVRvZ2dsZWQgKSB7XHJcblx0XHRcdFx0Ly8gVG9nZ2xlIFwib2ZmXCIgdGhlIHN1Ym1lbnUuXHJcblx0XHRcdFx0cGFyZW50TWVudUl0ZW0uY2xhc3NMaXN0LnJlbW92ZSggJ21lbnUtaXRlbS0tdG9nZ2xlZC1vbicgKTtcclxuXHRcdFx0XHRzdWJNZW51LmNsYXNzTGlzdC5yZW1vdmUoICd0b2dnbGUtc2hvdycgKTtcclxuXHRcdFx0XHR0b2dnbGVCdXR0b24uc2V0QXR0cmlidXRlKCAnYXJpYS1sYWJlbCcsIHRoZWJhc2VDb25maWcuc2NyZWVuUmVhZGVyLmV4cGFuZCApO1xyXG5cclxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgYWxsIGNoaWxkcmVuIGFyZSBjbG9zZWQuXHJcblx0XHRcdFx0dmFyIHN1Yk1lbnVJdGVtc1RvZ2dsZWQgPSBwYXJlbnRNZW51SXRlbS5xdWVyeVNlbGVjdG9yQWxsKCAnLm1lbnUtaXRlbS0tdG9nZ2xlZC1vbicgKTtcclxuXHRcdFx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBzdWJNZW51SXRlbXNUb2dnbGVkLmxlbmd0aDsgaSsrICkge1xyXG5cdFx0XHRcdFx0d2luZG93LnRoZWJhc2UudG9nZ2xlU3ViTWVudSggc3ViTWVudUl0ZW1zVG9nZ2xlZFsgaSBdLCBmYWxzZSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgc2libGluZ3MgYXJlIGNsb3NlZC5cclxuXHRcdFx0XHR2YXIgcGFyZW50TWVudUl0ZW1zVG9nZ2xlZCA9IHBhcmVudE1lbnVJdGVtLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCggJ2xpLm1lbnUtaXRlbS0tdG9nZ2xlZC1vbicgKTtcclxuXHRcdFx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBwYXJlbnRNZW51SXRlbXNUb2dnbGVkLmxlbmd0aDsgaSsrICkge1xyXG5cdFx0XHRcdFx0d2luZG93LnRoZWJhc2UudG9nZ2xlU3ViTWVudSggcGFyZW50TWVudUl0ZW1zVG9nZ2xlZFsgaSBdLCBmYWxzZSApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gVG9nZ2xlIFwib25cIiB0aGUgc3VibWVudS5cclxuXHRcdFx0XHRwYXJlbnRNZW51SXRlbS5jbGFzc0xpc3QuYWRkKCAnbWVudS1pdGVtLS10b2dnbGVkLW9uJyApO1xyXG5cdFx0XHRcdHN1Yk1lbnUuY2xhc3NMaXN0LmFkZCggJ3RvZ2dsZS1zaG93JyApO1xyXG5cdFx0XHRcdHRvZ2dsZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdhcmlhLWxhYmVsJywgdGhlYmFzZUNvbmZpZy5zY3JlZW5SZWFkZXIuY29sbGFwc2UgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdC8qKlxyXG5cdFx0ICogUmV0dXJucyB0cnVlIGlmIGVsZW1lbnQgaXMgdGhlXHJcblx0XHQgKiBmaXJzdCBmb2N1c2FibGUgZWxlbWVudCBpbiB0aGUgY29udGFpbmVyLlxyXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRhaW5lclxyXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnRcclxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBmb2N1c1NlbGVjdG9yXHJcblx0XHQgKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIG9yIG5vdCB0aGUgZWxlbWVudCBpcyB0aGUgZmlyc3QgZm9jdXNhYmxlIGVsZW1lbnQgaW4gdGhlIGNvbnRhaW5lclxyXG5cdFx0ICovXHJcblx0XHRpc2ZpcnN0Rm9jdXNhYmxlRWxlbWVudDogZnVuY3Rpb24oIGNvbnRhaW5lciwgZWxlbWVudCwgZm9jdXNTZWxlY3RvciApIHtcclxuXHRcdFx0dmFyIGZvY3VzYWJsZUVsZW1lbnRzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoIGZvY3VzU2VsZWN0b3IgKTtcclxuXHRcdFx0aWYgKCAwIDwgZm9jdXNhYmxlRWxlbWVudHMubGVuZ3RoICkge1xyXG5cdFx0XHRcdHJldHVybiBlbGVtZW50ID09PSBmb2N1c2FibGVFbGVtZW50c1sgMCBdO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBSZXR1cm5zIHRydWUgaWYgZWxlbWVudCBpcyB0aGVcclxuXHRcdCAqIGxhc3QgZm9jdXNhYmxlIGVsZW1lbnQgaW4gdGhlIGNvbnRhaW5lci5cclxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250YWluZXJcclxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50XHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gZm9jdXNTZWxlY3RvclxyXG5cdFx0ICogQHJldHVybiB7Ym9vbGVhbn0gd2hldGhlciBvciBub3QgdGhlIGVsZW1lbnQgaXMgdGhlIGxhc3QgZm9jdXNhYmxlIGVsZW1lbnQgaW4gdGhlIGNvbnRhaW5lclxyXG5cdFx0ICovXHJcblx0XHRpc2xhc3RGb2N1c2FibGVFbGVtZW50OiBmdW5jdGlvbiggY29udGFpbmVyLCBlbGVtZW50LCBmb2N1c1NlbGVjdG9yICkge1xyXG5cdFx0XHR2YXIgZm9jdXNhYmxlRWxlbWVudHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCggZm9jdXNTZWxlY3RvciApO1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKCBmb2N1c2FibGVFbGVtZW50cyApO1xyXG5cdFx0XHRpZiAoIDAgPCBmb2N1c2FibGVFbGVtZW50cy5sZW5ndGggKSB7XHJcblx0XHRcdFx0cmV0dXJuIGVsZW1lbnQgPT09IGZvY3VzYWJsZUVsZW1lbnRzWyBmb2N1c2FibGVFbGVtZW50cy5sZW5ndGggLSAxIF07XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fSxcclxuXHRcdC8qKlxyXG5cdFx0ICogSW5pdGlhdGUgdGhlIHNjcmlwdCB0byBwcm9jZXNzIGFsbCBkcmF3ZXIgdG9nZ2xlcy5cclxuXHRcdCAqL1xyXG5cdFx0IHRvZ2dsZURyYXdlcjogZnVuY3Rpb24oIGVsZW1lbnQsIGNoYW5nZUZvY3VzICkge1xyXG5cdFx0XHRjaGFuZ2VGb2N1cyA9ICh0eXBlb2YgY2hhbmdlRm9jdXMgIT09ICd1bmRlZmluZWQnKSA/ICBjaGFuZ2VGb2N1cyA6IHRydWU7XHJcblx0XHRcdHZhciB0b2dnbGUgPSBlbGVtZW50O1xyXG5cdFx0XHR2YXIgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggdG9nZ2xlLmRhdGFzZXQudG9nZ2xlVGFyZ2V0ICk7XHJcblx0XHRcdHZhciBfZG9jICAgPSBkb2N1bWVudDtcclxuXHRcdFx0dmFyIGR1cmF0aW9uID0gKCB0b2dnbGUuZGF0YXNldC50b2dnbGVEdXJhdGlvbiA/IHRvZ2dsZS5kYXRhc2V0LnRvZ2dsZUR1cmF0aW9uIDogMjUwICk7XHJcblx0XHRcdHdpbmRvdy50aGViYXNlLnRvZ2dsZUF0dHJpYnV0ZSggdG9nZ2xlLCAnYXJpYS1leHBhbmRlZCcsICd0cnVlJywgJ2ZhbHNlJyApO1xyXG5cdFx0XHRpZiAoIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3ctZHJhd2VyJykgKSB7XHJcblx0XHRcdFx0aWYgKCB0b2dnbGUuZGF0YXNldC50b2dnbGVCb2R5Q2xhc3MgKSB7XHJcblx0XHRcdFx0XHRfZG9jLmJvZHkuY2xhc3NMaXN0LnJlbW92ZSggdG9nZ2xlLmRhdGFzZXQudG9nZ2xlQm9keUNsYXNzICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIEhpZGUgdGhlIGRyYXdlci5cclxuXHRcdFx0XHR0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHRcdFx0dGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcC1hbmltYXRlZCcpO1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0dGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctZHJhd2VyJyk7XHJcblx0XHRcdFx0XHRpZiAoIHRvZ2dsZS5kYXRhc2V0LnNldEZvY3VzICYmIGNoYW5nZUZvY3VzICkge1xyXG5cdFx0XHRcdFx0XHR2YXIgZm9jdXNFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0b2dnbGUuZGF0YXNldC5zZXRGb2N1cyk7XHJcblx0XHRcdFx0XHRcdGlmICggZm9jdXNFbGVtZW50ICkge1xyXG5cdFx0XHRcdFx0XHRcdGZvY3VzRWxlbWVudC5mb2N1cygpO1xyXG5cdFx0XHRcdFx0XHRcdGlmICggZm9jdXNFbGVtZW50Lmhhc0F0dHJpYnV0ZSggJ2FyaWEtZXhwYW5kZWQnKSApIHtcclxuXHRcdFx0XHRcdFx0XHRcdHdpbmRvdy50aGViYXNlLnRvZ2dsZUF0dHJpYnV0ZSggZm9jdXNFbGVtZW50LCAnYXJpYS1leHBhbmRlZCcsICd0cnVlJywgJ2ZhbHNlJyApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIGR1cmF0aW9uKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBTaG93IHRoZSBkcmF3ZXIuXHJcblx0XHRcdFx0dGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3Nob3ctZHJhd2VyJyk7XHJcblx0XHRcdFx0Ly8gVG9nZ2xlIGJvZHkgY2xhc3NcclxuXHRcdFx0XHRpZiAoIHRvZ2dsZS5kYXRhc2V0LnRvZ2dsZUJvZHlDbGFzcyApIHtcclxuXHRcdFx0XHRcdF9kb2MuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCB0b2dnbGUuZGF0YXNldC50b2dnbGVCb2R5Q2xhc3MgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHR0YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHRcdFx0XHRpZiAoIHRvZ2dsZS5kYXRhc2V0LnNldEZvY3VzLCBjaGFuZ2VGb2N1cyApIHtcclxuXHRcdFx0XHRcdFx0dmFyIGZvY3VzRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodG9nZ2xlLmRhdGFzZXQuc2V0Rm9jdXMpO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCBmb2N1c0VsZW1lbnQgKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCBmb2N1c0VsZW1lbnQuaGFzQXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcpICkge1xyXG5cdFx0XHRcdFx0XHRcdFx0d2luZG93LnRoZWJhc2UudG9nZ2xlQXR0cmlidXRlKCBmb2N1c0VsZW1lbnQsICdhcmlhLWV4cGFuZGVkJywgJ3RydWUnLCAnZmFsc2UnICk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHZhciBzZWFyY2hUZXJtID0gZm9jdXNFbGVtZW50LnZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGZvY3VzRWxlbWVudC52YWx1ZSA9ICcnO1xyXG5cdFx0XHRcdFx0XHRcdGZvY3VzRWxlbWVudC5mb2N1cygpO1xyXG5cdFx0XHRcdFx0XHRcdGZvY3VzRWxlbWVudC52YWx1ZSA9IHNlYXJjaFRlcm07XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCAxMCk7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHR0YXJnZXQuY2xhc3NMaXN0LmFkZCgncG9wLWFuaW1hdGVkJyk7XHJcblx0XHRcdFx0fSwgZHVyYXRpb24pO1xyXG5cdFx0XHRcdC8vIEtlZXAgRm9jdXMgaW4gTW9kYWxcclxuXHRcdFx0XHRpZiAoIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwLWRyYXdlcicpICkge1xyXG5cdFx0XHRcdFx0Ly8gYWRkIGFsbCB0aGUgZWxlbWVudHMgaW5zaWRlIG1vZGFsIHdoaWNoIHlvdSB3YW50IHRvIG1ha2UgZm9jdXNhYmxlXHJcblx0XHRcdFx0XHR2YXIgZm9jdXNhYmxlRWxlbWVudHMgPSAnYnV0dG9uLCBbaHJlZl0sIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXg9XCItMVwiXSknO1xyXG5cdFx0XHRcdFx0dmFyIGZvY3VzYWJsZUNvbnRlbnQgPSB0YXJnZXQucXVlcnlTZWxlY3RvckFsbCggZm9jdXNhYmxlRWxlbWVudHMgKTtcclxuXHRcdFx0XHRcdHZhciBmaXJzdEZvY3VzYWJsZUVsZW1lbnQgPSBmb2N1c2FibGVDb250ZW50WzBdOyAvLyBnZXQgZmlyc3QgZWxlbWVudCB0byBiZSBmb2N1c2VkIGluc2lkZSBtb2RhbFxyXG5cdFx0XHRcdFx0dmFyIGxhc3RGb2N1c2FibGVFbGVtZW50ID0gZm9jdXNhYmxlQ29udGVudFsgZm9jdXNhYmxlQ29udGVudC5sZW5ndGggLSAxIF07IC8vIGdldCBsYXN0IGVsZW1lbnQgdG8gYmUgZm9jdXNlZCBpbnNpZGUgbW9kYWxcclxuXHJcblx0XHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGlzVGFiUHJlc3NlZCA9IGUua2V5ID09PSAnVGFiJyB8fCBlLmtleUNvZGUgPT09IDk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoICEgaXNUYWJQcmVzc2VkICkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCBlLnNoaWZ0S2V5ICkgeyAvLyBpZiBzaGlmdCBrZXkgcHJlc3NlZCBmb3Igc2hpZnQgKyB0YWIgY29tYmluYXRpb25cclxuXHRcdFx0XHRcdFx0XHRpZiAoIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGZpcnN0Rm9jdXNhYmxlRWxlbWVudCApIHtcclxuXHRcdFx0XHRcdFx0XHRcdGxhc3RGb2N1c2FibGVFbGVtZW50LmZvY3VzKCk7IC8vIGFkZCBmb2N1cyBmb3IgdGhlIGxhc3QgZm9jdXNhYmxlIGVsZW1lbnRcclxuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7IC8vIGlmIHRhYiBrZXkgaXMgcHJlc3NlZFxyXG5cdFx0XHRcdFx0XHRcdGlmICggZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gbGFzdEZvY3VzYWJsZUVsZW1lbnQgKSB7IC8vIGlmIGZvY3VzZWQgaGFzIHJlYWNoZWQgdG8gbGFzdCBmb2N1c2FibGUgZWxlbWVudCB0aGVuIGZvY3VzIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50IGFmdGVyIHByZXNzaW5nIHRhYlxyXG5cdFx0XHRcdFx0XHRcdFx0Zmlyc3RGb2N1c2FibGVFbGVtZW50LmZvY3VzKCk7IC8vIGFkZCBmb2N1cyBmb3IgdGhlIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50XHJcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQvKipcclxuXHRcdCAqIEluaXRpYXRlIHRoZSBzY3JpcHQgdG8gcHJvY2VzcyBhbGxcclxuXHRcdCAqIG5hdmlnYXRpb24gbWVudXMgd2l0aCBzbWFsbCB0b2dnbGUgZW5hYmxlZC5cclxuXHRcdCAqL1xyXG5cdFx0IGluaXRUb2dnbGVEcmF3ZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgZHJhd2VyVE9HR0xFID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJy5kcmF3ZXItdG9nZ2xlJyApO1xyXG5cclxuXHRcdFx0Ly8gTm8gcG9pbnQgaWYgbm8gZHJhd2Vycy5cclxuXHRcdFx0aWYgKCAhIGRyYXdlclRPR0dMRS5sZW5ndGggKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvciAoIGxldCBpID0gMDsgaSA8IGRyYXdlclRPR0dMRS5sZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0XHRkcmF3ZXJUT0dHTEVbIGkgXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHR3aW5kb3cudGhlYmFzZS50b2dnbGVEcmF3ZXIoIGRyYXdlclRPR0dMRVsgaSBdICk7XHJcblx0XHRcdFx0fSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIENsb3NlIERyYXdlciBpZiBlc2MgaXMgcHJlc3NlZC5cclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2tleXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRcdFx0Ly8gMjcgaXMga2V5bWFwIGZvciBlc2Mga2V5LlxyXG5cdFx0XHRcdGlmICggZXZlbnQua2V5Q29kZSA9PT0gMjcgKSB7XHJcblx0XHRcdFx0XHRpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcucG9wdXAtZHJhd2VyLnNob3ctZHJhd2VyLmFjdGl2ZScgKSApIHtcclxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJy5wb3B1cC1kcmF3ZXIuc2hvdy1kcmF3ZXIuYWN0aXZlJyApLmZvckVhY2goZnVuY3Rpb24gKCBlbGVtZW50ICkge1xyXG5cdFx0XHRcdFx0XHRcdHdpbmRvdy50aGViYXNlLnRvZ2dsZURyYXdlciggZG9jdW1lbnQucXVlcnlTZWxlY3RvcignKltkYXRhLXRvZ2dsZS10YXJnZXQ9XCInICsgZWxlbWVudC5kYXRhc2V0LmRyYXdlclRhcmdldFN0cmluZyArICdcIl0nICkgKTtcclxuXHRcdFx0XHRcdFx0fSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0ICB9KTtcclxuXHRcdFx0Ly8gQ2xvc2UgbW9kYWwgb24gb3V0c2lkZSBjbGljay5cclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRcdFx0dmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuXHRcdFx0XHR2YXIgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLnNob3ctZHJhd2VyLmFjdGl2ZSAuZHJhd2VyLW92ZXJsYXknICk7XHJcblx0XHRcdFx0aWYgKCB0YXJnZXQgPT09IG1vZGFsICkge1xyXG5cdFx0XHRcdFx0d2luZG93LnRoZWJhc2UudG9nZ2xlRHJhd2VyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJypbZGF0YS10b2dnbGUtdGFyZ2V0PVwiJyArIG1vZGFsLmRhdGFzZXQuZHJhd2VyVGFyZ2V0U3RyaW5nICsgJ1wiXScpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gKTtcclxuXHRcdH0sXHJcblx0XHQvKipcclxuXHRcdCAqIEluaXRpYXRlIHRoZSBzY3JpcHQgdG8gcHJvY2VzcyBhbGxcclxuXHRcdCAqIG5hdmlnYXRpb24gbWVudXMgd2l0aCBzbWFsbCB0b2dnbGUgZW5hYmxlZC5cclxuXHRcdCAqL1xyXG5cdFx0IGluaXRNb2JpbGVUb2dnbGVTdWI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgbW9kYWxNZW51cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcuaGFzLWNvbGxhcHNlLXN1Yi1uYXYnICk7XHJcblxyXG5cdFx0XHRtb2RhbE1lbnVzLmZvckVhY2goIGZ1bmN0aW9uKCBtb2RhbE1lbnUgKSB7XHJcblx0XHRcdFx0dmFyIGFjdGl2ZU1lbnVJdGVtID0gbW9kYWxNZW51LnF1ZXJ5U2VsZWN0b3IoICcuY3VycmVudC1tZW51LWl0ZW0nICk7XHJcblx0XHRcdFx0aWYgKCBhY3RpdmVNZW51SXRlbSApIHtcclxuXHRcdFx0XHRcdHdpbmRvdy50aGViYXNlLmZpbmRQYXJlbnRzKCBhY3RpdmVNZW51SXRlbSwgJ2xpJyApLmZvckVhY2goIGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0XHRcdFx0XHR2YXIgc3ViTWVudVRvZ2dsZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvciggJy5kcmF3ZXItc3ViLXRvZ2dsZScgKTtcclxuXHRcdFx0XHRcdFx0aWYgKCBzdWJNZW51VG9nZ2xlICkge1xyXG5cdFx0XHRcdFx0XHRcdHdpbmRvdy50aGViYXNlLnRvZ2dsZURyYXdlciggc3ViTWVudVRvZ2dsZSwgdHJ1ZSApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9ICk7XHJcblx0XHRcdHZhciBkcmF3ZXJTdWJUT0dHTEUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnLmRyYXdlci1zdWItdG9nZ2xlJyApO1xyXG5cdFx0XHQvLyBObyBwb2ludCBpZiBubyBkcmF3ZXJzLlxyXG5cdFx0XHRpZiAoICEgZHJhd2VyU3ViVE9HR0xFLmxlbmd0aCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFxyXG5cdFx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBkcmF3ZXJTdWJUT0dHTEUubGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdFx0ZHJhd2VyU3ViVE9HR0xFWyBpIF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHR3aW5kb3cudGhlYmFzZS50b2dnbGVEcmF3ZXIoIGRyYXdlclN1YlRPR0dMRVsgaSBdICk7XHJcblx0XHRcdFx0fSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0LyoqXHJcblx0XHQgKiBJbml0aWF0ZSB0aGUgc2NyaXB0IHRvIHByb2Nlc3MgYWxsXHJcblx0XHQgKiBuYXZpZ2F0aW9uIG1lbnVzIGNoZWNrIHRvIGNsb3NlIG1vYmlsZS5cclxuXHRcdCAqL1xyXG5cdFx0IGluaXRNb2JpbGVUb2dnbGVBbmNob3I6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgbW9iaWxlTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ21vYmlsZS1kcmF3ZXInICk7XHJcblx0XHRcdC8vIE5vIHBvaW50IGlmIG5vIGRyYXdlcnMuXHJcblx0XHRcdGlmICggISBtb2JpbGVNb2RhbCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0dmFyIG1lbnVMaW5rID0gbW9iaWxlTW9kYWwucXVlcnlTZWxlY3RvckFsbCggJ2EnICk7XHJcblx0XHRcdC8vIE5vIHBvaW50IGlmIG5vIGxpbmtzLlxyXG5cdFx0XHRpZiAoICEgbWVudUxpbmsubGVuZ3RoICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBtZW51TGluay5sZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0XHRtZW51TGlua1sgaSBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRcdFx0XHR3aW5kb3cudGhlYmFzZS50b2dnbGVEcmF3ZXIoIG1vYmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoICcubWVudS10b2dnbGUtY2xvc2UnICksIGZhbHNlICk7XHJcblx0XHRcdFx0fSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0LyoqXHJcblx0XHQgKiBJbml0aWF0ZSBzZXR0aW5nIHRoZSB0b3AgcGFkZGluZyBmb3IgaGVybyB0aXRsZSB3aGVuIHBhZ2UgaXMgdHJhbnNwYXJlbnQuXHJcblx0XHQgKi9cclxuXHRcdGluaXRUcmFuc0hlYWRlclBhZGRpbmc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCAnbm8taGVhZGVyJyApICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICEgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoICd0cmFuc3BhcmVudC1oZWFkZXInICkgfHwgISBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyggJ21vYmlsZS10cmFuc3BhcmVudC1oZWFkZXInICkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciB0aXRsZUhlcm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmVudHJ5LWhlcm8tY29udGFpbmVyLWlubmVyJyApLFxyXG5cdFx0XHRcdGhlYWRlciA9ICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnI21hc3RoZWFkJyApO1xyXG5cdFx0XHR2YXIgdXBkYXRlSGVyb1BhZGRpbmcgPSBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRoZWFkZXJcclxuXHRcdFx0XHRpZiAoIHRoZWJhc2VDb25maWcuYnJlYWtQb2ludHMuZGVza3RvcCA8PSB3aW5kb3cuaW5uZXJXaWR0aCApIHtcclxuXHRcdFx0XHRcdGlmICggISBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyggJ3RyYW5zcGFyZW50LWhlYWRlcicgKSApIHtcclxuXHRcdFx0XHRcdFx0dGl0bGVIZXJvLnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGl0bGVIZXJvLnN0eWxlLnBhZGRpbmdUb3AgPSBoZWFkZXIub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKCAhIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCAnbW9iaWxlLXRyYW5zcGFyZW50LWhlYWRlcicgKSApIHtcclxuXHRcdFx0XHRcdFx0dGl0bGVIZXJvLnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGl0bGVIZXJvLnN0eWxlLnBhZGRpbmdUb3AgPSBoZWFkZXIub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aXRsZUhlcm8gKSB7XHJcblx0XHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdyZXNpemUnLCB1cGRhdGVIZXJvUGFkZGluZywgZmFsc2UgKTtcclxuXHRcdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3Njcm9sbCcsIHVwZGF0ZUhlcm9QYWRkaW5nLCBmYWxzZSApO1xyXG5cdFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAnbG9hZCcsIHVwZGF0ZUhlcm9QYWRkaW5nLCBmYWxzZSApO1xyXG5cdFx0XHRcdHVwZGF0ZUhlcm9QYWRkaW5nKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRnZXRUb3BPZmZzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBhY3RpdmVTY3JvbGxPZmZzZXRUb3AgPSAwLFxyXG5cdFx0XHRcdGFjdGl2ZVNjcm9sbEFkbWluT2Zmc2V0VG9wID0gMDtcclxuXHRcdFx0aWYgKCB0aGViYXNlQ29uZmlnLmJyZWFrUG9pbnRzLmRlc2t0b3AgPD0gd2luZG93LmlubmVyV2lkdGggKSB7XHJcblx0XHRcdFx0aWYgKCBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyggJ2FkbWluLWJhcicgKSApIHtcclxuXHRcdFx0XHRcdGFjdGl2ZVNjcm9sbEFkbWluT2Zmc2V0VG9wID0gMzI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFjdGl2ZVNjcm9sbEFkbWluT2Zmc2V0VG9wID0gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gTWF0aC5mbG9vciggYWN0aXZlU2Nyb2xsT2Zmc2V0VG9wICsgYWN0aXZlU2Nyb2xsQWRtaW5PZmZzZXRUb3AgKTtcclxuXHRcdH0sXHJcblx0XHQvKipcclxuXHRcdCAqIEluaXRpYXRlIHRoZSBzdGlja3kgc2lkZWJhci5cclxuXHRcdCAqL1xyXG5cdFx0aW5pdFN0aWNreVNpZGViYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoICEgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoICdoYXMtc3RpY2t5LXNpZGViYXInICkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBvZmZzZXRTdGlja3kgPSB3aW5kb3cudGhlYmFzZS5nZXRUb3BPZmZzZXQoKSxcclxuXHRcdFx0c2lkZWJhciAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnI3NlY29uZGFyeSAuc2lkZWJhci1pbm5lci13cmFwJyApO1xyXG5cdFx0XHRzaWRlYmFyLnN0eWxlLnRvcCA9IE1hdGguZmxvb3IoIG9mZnNldFN0aWNreSArIDIwICkgKyAncHgnO1xyXG5cdFx0XHRzaWRlYmFyLnN0eWxlLm1heEhlaWdodCA9ICdjYWxjKCAxMDB2aCAtICcgKyBNYXRoLmZsb29yKCBvZmZzZXRTdGlja3kgKyAyMCApICsgJ3B4ICknO1xyXG5cdFx0fSxcclxuXHRcdC8vIEluaXRpYXRlIHRoZSBtZW51cyB3aGVuIHRoZSBET00gbG9hZHMuXHJcblx0XHRpbml0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0d2luZG93LnRoZWJhc2UuaW5pdE5hdlRvZ2dsZVN1Ym1lbnVzKCk7XHJcblx0XHRcdHdpbmRvdy50aGViYXNlLmluaXRUb2dnbGVEcmF3ZXIoKTtcclxuXHRcdFx0d2luZG93LnRoZWJhc2UuaW5pdE1vYmlsZVRvZ2dsZUFuY2hvcigpO1xyXG5cdFx0XHR3aW5kb3cudGhlYmFzZS5pbml0TW9iaWxlVG9nZ2xlU3ViKCk7XHJcblx0XHRcdHdpbmRvdy50aGViYXNlLmluaXRPdXRsaW5lVG9nZ2xlKCk7XHJcblx0XHRcdHdpbmRvdy50aGViYXNlLmluaXRTdGlja3lTaWRlYmFyKCk7XHJcblx0XHRcdHdpbmRvdy50aGViYXNlLmluaXRUcmFuc0hlYWRlclBhZGRpbmcoKTtcclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKCAnbG9hZGluZycgPT09IGRvY3VtZW50LnJlYWR5U3RhdGUgKSB7XHJcblx0XHQvLyBUaGUgRE9NIGhhcyBub3QgeWV0IGJlZW4gbG9hZGVkLlxyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ0RPTUNvbnRlbnRMb2FkZWQnLCB3aW5kb3cudGhlYmFzZS5pbml0ICk7XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIFRoZSBET00gaGFzIGFscmVhZHkgYmVlbiBsb2FkZWQuXHJcblx0XHR3aW5kb3cudGhlYmFzZS5pbml0KCk7XHJcblx0fVxyXG59KSgpO1xyXG4iXX0=